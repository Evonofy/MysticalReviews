---
import { slugify } from "@/slug"
import Pill from "./Pill.astro"

export interface Props {
  title: string
  description: string
  imageUrl: string
  tags: string[]
  createdAt: number

  isLCP?: boolean
}

const {
  title,
  description,
  createdAt,
  tags,
  imageUrl,
  isLCP = false,
} = Astro.props

const formattedDate = new Date(createdAt).toDateString()
const slug = `/posts/${slugify(title)}`
---

<a
  href={slug}
  class="swiper-slide flex w-full flex-col rounded bg-gray-100 shadow-main"
  style="overflow: overlay;"
>
  <img
    src={imageUrl}
    alt={`Imagem de capa do post ${title}`}
    width={280}
    height={180}
    loading={isLCP ? "eager" : "lazy"}
    fetchpriority={isLCP ? "high" : "low"}
    class="max-h-[180px] w-full object-cover"
  />

  <div class="flex flex-col gap-3 overflow-x-hidden p-3 pb-5">
    <ul class="scroll-b flex w-full items-center gap-1 overflow-x-auto">
      {
        tags.map((tag, index) => (
          <li>
            <Pill label={tag} {index} />
          </li>
        ))
      }
    </ul>

    <section class="flex flex-col gap-1">
      <h3 class="font-display text-gray-800">{title}</h3>

      <p class="font-base text-gray-500">
        {description}
      </p>
    </section>

    <footer class="flex flex-col items-center gap-1">
      <p class="text-xs font-medium text-gray-600">
        {formattedDate}
      </p>

      <div class="h-[5px] w-[60px] rounded-full bg-accent-base"></div>
    </footer>
  </div>
</a>
